@(searchResult: SearchResponse)

@main("search") {

    <body onload="initializeAutocomplete(document)">
		<section>
		<div class="container">
		<h3>Search for Ridehsharing</h3></br>
        <form name="searchRoute" action="@routes.RouteActions.search()" method="post">

            <div class="col-xs-12">
            <label>Starting Address</label>
            <input class="form-control" id="startAddress" type="text" name="startAddress" value="" placeholder="Enter Location" onFocus="geolocate()" />
            </div>
            <br>

			<div class="col-xs-12">
            <label>Destination Address</label>
            <input class="form-control" id="endAddress" type="text" name="endAddress" value="" placeholder="Enter Location" onFocus="geolocate()" />

            <label>Use current location for</label>
            <input type="radio" name="auto" checked="yes" onclick="handleClick();" value="start"><b>Starting</b>
            <label>or</label>
            <input type="radio" name="auto" onclick="handleClick();" value="dest"><b>Destination</b>
            <label>Address</label>

            </div>
			<br>



			<div class="col-xs-4">
            <label>Date</label>
            <input class="form-control" name="date" type="date" placeholder="30.12.2015" />
			</div>
            <br>

			<div class="col-xs-4">
            <label>Time</label>
            <input class="form-control col-xs-2" name="time"  placeholder="20:30"/>
			</div>
            <br>

			<div class="col-xs-12">
            <input class="btn btn-success" type="submit" value="Search">
			</div>
        </form>
		</div>
		<hr style="margin-top:40px; margin-bottom:40px">
        <div class="container" >
            <h3>Matched Patterns</h3>
            <table class="table table-striped table-bordered">
                <tr>
                    <th>
                        Start Address
                    </th>
                    <th>
                        Destination Address
                    </th>
                    <th>
                        Puncuality Address
                    </th>
                    <th>
                        Start Address
                    </th>
                    <th>
                        Start Address
                    </th>
                </tr>
            </table>

            <h3>Statistics</h3>
            @if(!searchResult.Stop.equals("")) {
                @if(!searchResult.Start.equals("")) {
                    You have searched route <b>from @searchResult.Start to @searchResult.Stop</b>
                    <br>
                    @searchResult.ExactMatches users have searched this route
                    <br><br>
                }
            }

            @if(!searchResult.Start.equals("")) {
                <b>Searches starting in @searchResult.Start (@searchResult.StartMatches occurances)</b>

                <table class="table table-striped table-bordered">
                    <tr>
                        <th>
                            Destination Address
                        </th>
                        <th>
                            Frequency
                        </th>
                    </tr>
                    @for(a <- searchResult.StartArea) {
                        <tr>
                            <td>
                            @a.area
                            </td>
                            <td>
                            @a.occurances
                            </td>
                        </tr>
                    }
                </table>
            }


            @if(!searchResult.Stop.equals("")) {
                <b>Searches with destination in @searchResult.Stop (@searchResult.EndMatches occurances)</b>

                <table class="table table-striped table-bordered">
                    <tr>
                        <th>
                            Start Address
                        </th>
                        <th>
                            Frequency
                        </th>
                    </tr>
                    @for(a <- searchResult.DestinationAreas) {
                        <tr>
                            <td>
                            @a.area
                            </td>
                            <td>
                            @a.occurances
                            </td>
                        </tr>
                    }
                </table>
            }
        </div>

        <div class="container" id="mapContainer" style="height: 600px ; margin: 0px auto;"; >
                <!-- This is where Google map will go. -->
        </div>
	</section>
    </body>

    <script>
        pinpointMe(document, 'startAddress');
    </script>
    <script>
        var rad = document.searchRoute.auto;
        function handleClick() {
            if ($('input[name="auto"]:checked').val() == 'start'){
                document.getElementById('endAddress').value = '';
                pinpointMe(document, 'startAddress');
            }else{
                document.getElementById('startAddress').value = '';
                pinpointMe(document, 'endAddress');
            }
        }
    </script>
}
